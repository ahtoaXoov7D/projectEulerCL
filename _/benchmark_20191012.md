# Benchmark

## Ntt benchmark

### Test Environment:

* Dateï¼š 2019.10.12
* OS:  Win10 Pro 1903 (18362.418)
* CPU: [i9-9900K](https://en.wikichip.org/wiki/intel/core_i9/i9-9900k)
* Compiler: gcc version 9.2.0 (Rev2, Built by MSYS2 project)
* Msys2: msys2-x86_64-20190524
* Test code: [Ntt test](https://github.com/baihacker/pe/blob/master/test/ntt_test.c)
* Build:
  * [Build and use third party library in pe](https://github.com/baihacker/pe/blob/master/libraries_on_win64.md#build-and-use-third-party-library-in-pe)
  * Build test target:
  > -o a.exe --std=c++14 -fno-diagnostics-color -O3 -march=native -mtune=native -fopenmp -Wl,--stack,268435456 -static -s -lbf -lgmpxx -lflint -lmpfr -lntl -lgmp

### Test result

#### Openmp enabled
```cpp
ntt test : data = random, size = 0, n = 1000000, mod = 100019
flint n  : 0.307
flint p  : 1.040
ntt32 s  : 0.823
ntt32 l  : 0.889
ntt64 s  : 1.381
ntt64 l  : 1.439
Min_25 s : 0.114
Min_25 l : 0.128
libbf    : 0.644
ntl      : 0.621
ntt test : data = random, size = 1, n = 1479725, mod = 100000000003
flint n  : 0.929
flint p  : 2.657
ntt32 l  : 1.774
ntt64 l  : 2.880
Min_25 l : 0.259
libbf    : 1.104
ntl      : 1.330
ntt test : data = random, size = 2, n = 1000000, mod = 316227766016779
flint n  : 0.628
flint p  : 1.888
ntt64 l  : 1.449
Min_25 l : 0.149
libbf    : 0.689
ntl      : 0.966
ntt test : data = max mod, size = 0, n = 999996, mod = 1000003
flint n  : 0.316
flint p  : 1.097
ntt32 s  : 0.827
ntt32 l  : 0.885
ntt64 s  : 1.379
ntt64 l  : 1.419
Min_25 s : 0.113
Min_25 l : 0.127
libbf    : 0.651
ntl      : 0.619
ntt test : data = max mod, size = 1, n = 1479725, mod = 100000000003
flint n  : 0.927
flint p  : 2.531
ntt32 l  : 1.768
ntt64 l  : 2.892
Min_25 l : 0.259
libbf    : 1.107
ntl      : 1.293
ntt test : data = max mod, size = 2, n = 1000000, mod = 316227766016779
flint n  : 0.627
flint p  : 1.894
ntt64 l  : 1.423
Min_25 l : 0.135
libbf    : 0.692
ntl      : 0.946

mod = 100019
log2(n)  10     11     12     13     14     15     16     17     18     19     20
flint n  0.000  0.000  0.001  0.001  0.002  0.006  0.012  0.029  0.060  0.160  0.319
flint p  0.001  0.002  0.003  0.006  0.014  0.028  0.059  0.122  0.250  0.536  1.119
ntt32 s  0.001  0.001  0.004  0.007  0.015  0.032  0.048  0.104  0.204  0.410  0.829
ntt32 l  0.001  0.002  0.004  0.008  0.018  0.034  0.052  0.114  0.217  0.440  0.902
ntt64 s  0.001  0.002  0.005  0.012  0.026  0.055  0.081  0.167  0.337  0.684  1.380
ntt64 l  0.001  0.003  0.006  0.013  0.026  0.055  0.082  0.173  0.350  0.706  1.445
Min_25 s 0.000  0.001  0.000  0.001  0.002  0.002  0.007  0.013  0.026  0.055  0.115
Min_25 l 0.000  0.000  0.001  0.002  0.003  0.006  0.010  0.017  0.031  0.061  0.129
libbf    0.001  0.001  0.002  0.004  0.009  0.021  0.044  0.072  0.150  0.311  0.652
ntl      0.000  0.001  0.002  0.004  0.008  0.017  0.036  0.074  0.151  0.311  0.644
mod = 100000000003
log2(n)  10     11     12     13     14     15     16     17     18     19     20
flint n  0.000  0.000  0.001  0.002  0.004  0.010  0.021  0.045  0.098  0.302  0.649
flint p  0.001  0.003  0.005  0.010  0.021  0.045  0.092  0.192  0.399  0.843  1.759
ntt32 l  0.002  0.002  0.004  0.008  0.017  0.035  0.053  0.115  0.219  0.435  0.893
ntt64 l  0.002  0.003  0.006  0.012  0.026  0.057  0.085  0.176  0.356  0.715  1.445
Min_25 l 0.000  0.000  0.001  0.002  0.004  0.008  0.014  0.020  0.035  0.064  0.135
libbf    0.001  0.000  0.001  0.005  0.010  0.021  0.046  0.077  0.158  0.331  0.692
ntl      0.001  0.002  0.003  0.006  0.012  0.025  0.051  0.107  0.218  0.448  0.922
mod = 316227766016779
log2(n)  10     11     12     13     14     15     16     17     18     19     20
flint n  0.000  0.000  0.001  0.003  0.006  0.012  0.029  0.072  0.153  0.299  0.629
flint p  0.001  0.002  0.005  0.011  0.024  0.049  0.105  0.212  0.435  0.922  1.932
ntt64 l  0.002  0.002  0.006  0.013  0.027  0.057  0.085  0.175  0.357  0.715  1.449
Min_25 l 0.000  0.000  0.001  0.002  0.004  0.008  0.013  0.020  0.035  0.065  0.136
libbf    0.001  0.000  0.002  0.004  0.009  0.021  0.051  0.078  0.160  0.334  0.723
ntl      0.001  0.001  0.003  0.007  0.013  0.027  0.055  0.117  0.237  0.486  1.001
```

#### Openmp disabled (option "-fopenmp" removed)
```cpp
ntt test : data = random, size = 0, n = 1000000, mod = 100019
flint n  : 0.308
flint p  : 1.037
ntt32 s  : 2.626
ntt32 l  : 4.083
ntt64 s  : 2.312
ntt64 l  : 4.615
Min_25 s : 0.121
Min_25 l : 0.264
libbf    : 0.645
ntl      : 0.622
ntt test : data = random, size = 1, n = 1479725, mod = 100000000003
flint n  : 0.927
flint p  : 2.640
ntt32 l  : 8.653
ntt64 l  : 9.798
Min_25 l : 0.617
libbf    : 1.100
ntl      : 1.332
ntt test : data = random, size = 2, n = 1000000, mod = 316227766016779
flint n  : 0.627
flint p  : 1.877
ntt64 l  : 4.687
Min_25 l : 0.331
libbf    : 0.687
ntl      : 0.966
ntt test : data = max mod, size = 0, n = 999996, mod = 1000003
flint n  : 0.316
flint p  : 1.095
ntt32 s  : 2.625
ntt32 l  : 4.065
ntt64 s  : 2.280
ntt64 l  : 4.588
Min_25 s : 0.122
Min_25 l : 0.263
libbf    : 0.644
ntl      : 0.618
ntt test : data = max mod, size = 1, n = 1479725, mod = 100000000003
flint n  : 0.925
flint p  : 2.511
ntt32 l  : 8.694
ntt64 l  : 9.799
Min_25 l : 0.610
libbf    : 1.091
ntl      : 1.294
ntt test : data = max mod, size = 2, n = 1000000, mod = 316227766016779
flint n  : 0.628
flint p  : 1.861
ntt64 l  : 4.631
Min_25 l : 0.330
libbf    : 0.689
ntl      : 0.952

mod = 100019
log2(n)  10     11     12     13     14     15     16     17     18     19     20
flint n  0.000  0.000  0.000  0.001  0.002  0.006  0.012  0.029  0.060  0.160  0.319
flint p  0.001  0.001  0.003  0.006  0.014  0.028  0.057  0.125  0.251  0.529  1.095
ntt32 s  0.002  0.003  0.007  0.014  0.029  0.062  0.133  0.279  0.588  1.244  2.629
ntt32 l  0.002  0.004  0.010  0.021  0.045  0.096  0.206  0.433  0.911  1.927  4.066
ntt64 s  0.001  0.003  0.005  0.012  0.026  0.054  0.116  0.245  0.518  1.096  2.315
ntt64 l  0.002  0.005  0.011  0.023  0.051  0.109  0.232  0.491  1.035  2.191  4.626
Min_25 s 0.001  0.000  0.001  0.001  0.001  0.003  0.007  0.014  0.028  0.060  0.125
Min_25 l 0.000  0.001  0.001  0.001  0.003  0.007  0.014  0.030  0.061  0.129  0.268
libbf    0.001  0.000  0.001  0.004  0.008  0.020  0.044  0.073  0.149  0.313  0.655
ntl      0.000  0.001  0.002  0.004  0.009  0.017  0.035  0.074  0.153  0.314  0.641
mod = 100000000003
log2(n)  10     11     12     13     14     15     16     17     18     19     20
flint n  0.000  0.000  0.001  0.002  0.004  0.011  0.022  0.045  0.098  0.302  0.648
flint p  0.001  0.003  0.005  0.010  0.020  0.044  0.091  0.191  0.397  0.834  1.734
ntt32 l  0.002  0.004  0.010  0.021  0.046  0.098  0.208  0.437  0.919  1.944  4.102
ntt64 l  0.003  0.006  0.011  0.024  0.051  0.111  0.236  0.499  1.052  2.224  4.691
Min_25 l 0.000  0.001  0.001  0.002  0.004  0.009  0.018  0.038  0.077  0.160  0.330
libbf    0.001  0.001  0.002  0.004  0.009  0.021  0.046  0.077  0.159  0.329  0.686
ntl      0.001  0.002  0.003  0.006  0.012  0.025  0.051  0.107  0.221  0.451  0.918
mod = 316227766016779
log2(n)  10     11     12     13     14     15     16     17     18     19     20
flint n  0.000  0.000  0.001  0.003  0.006  0.012  0.029  0.072  0.155  0.299  0.630
flint p  0.002  0.003  0.005  0.011  0.023  0.048  0.103  0.208  0.430  0.915  1.904
ntt64 l  0.002  0.005  0.011  0.024  0.052  0.112  0.236  0.499  1.052  2.226  4.699
Min_25 l 0.000  0.001  0.001  0.002  0.004  0.008  0.018  0.039  0.076  0.163  0.338
libbf    0.001  0.001  0.002  0.005  0.008  0.024  0.047  0.077  0.158  0.331  0.693
ntl      0.000  0.002  0.003  0.006  0.014  0.027  0.055  0.117  0.239  0.490  1.002
```
